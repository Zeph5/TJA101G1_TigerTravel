<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head >
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <meta charset="UTF-8">
    <title>é¦–é </title>
	
</head>
<body>

    <h1>æ­¡è¿ä¾†åˆ°æ—…éŠç¶²ç«™é¦–é </h1>

    <!--è‹¥ä½¿ç”¨è€…å·²ç™»å…¥-->

    <div sec:authorize="isAuthenticated()">
        <p>æ‚¨å¥½ï¼Œ<span sec:authentication="principal.member.memberName"></span>ï¼æ‚¨å·²ç™»å…¥ã€‚</p>
        
        <div th:if="${avatarBase64 != null}">
		    <img th:src="'data:image/png;base64,' + ${avatarBase64}" alt="å¤§é ­è²¼" width="100" height="100"/>
		</div>

        
        <form th:action="@{/logout}" method="post">
            <button type="submit">ç™»å‡º</button>
        </form>
        <a th:href="@{/member/home}">
		    <button type="button">æœƒå“¡ä¸­å¿ƒ</button>
		</a>
		
		<!-- åœ¨å°èˆªåˆ—æˆ–ç™»å…¥å¾Œçš„é¸å–®ä¸­åŠ å…¥ -->
		<li sec:authorize="isAuthenticated()">
		    <a th:href="@{/member/ticket/orders}" class="btn btn-outline-primary">ğŸ« æˆ‘çš„ç¥¨åˆ¸è¨‚å–®</a>
		</li>
		

    </div>

    <!-- è‹¥ä½¿ç”¨è€…å°šæœªç™»å…¥ -->

    <div sec:authorize="isAnonymous()">
        <p>æ‚¨å°šæœªç™»å…¥ã€‚è«‹å…ˆ <a th:href="@{/login}">ç™»å…¥</a> æˆ– <a th:href="@{/member/register}">è¨»å†Š</a>ã€‚</p>
    </div>
    
    <div th:if="${sceneryList != null}">
	    <p>å…±æœ‰ <span th:text="${#lists.size(sceneryList)}">0</span> ç­†æ™¯é»è³‡æ–™</p>
	
	    <div th:each="scenery : ${sceneryList}">
	        <h3 th:text="${scenery.sceneryName}">æ™¯é»åç¨±</h3>
	        <p th:text="${scenery.sceneryDescription}">æ™¯é»æè¿°</p>
	    	<img th:if="${scenery.imageUrl != null}" th:src="@{${scenery.imageUrl}}" alt="æ™¯é»åœ–ç‰‡" />
			<img th:if="${scenery.imageUrl == null}" th:src="@{/images/sample.png}" alt="é è¨­æ™¯é»åœ–" />
	    </div>
	</div>
	
	<p th:text="${test}">é€™æ˜¯æ¸¬è©¦è¨Šæ¯</p>
	
	
	<section class="container mt-5">
	    <h2 class="mb-3">ğŸ”¥ ç†±é–€ç¥¨åˆ¸</h2>
	
	    <div class="position-relative">
	        <!-- å·¦å³æŒ‰éˆ• -->
	        <button class="btn btn-outline-secondary position-absolute top-50 start-0 translate-middle-y z-3" onclick="scrollLeft()">
	            â¬…
	        </button>
	        <button class="btn btn-outline-secondary position-absolute top-50 end-0 translate-middle-y z-3" onclick="scrollRight()">
	            â¡
	        </button>
	
	        <!-- å¯æ©«å‘æ»¾å‹•å€å¡Š -->
	        <div id="ticketScroll" class="d-flex overflow-auto gap-3 px-4 py-2" style="scroll-behavior: smooth;">
	            <div th:each="ticket : ${ticketList}" class="card" style="min-width: 250px; max-width: 250px;">
	                <img th:if="${ticket['ticketImageBase64'] != null}" class="card-img-top"
	                     th:src="'data:image/png;base64,' + ${ticket['ticketImageBase64']}" alt="ç¥¨åˆ¸åœ–ç‰‡"
	                     style="height: 150px; object-fit: cover;">
	                <img th:if="${ticket['ticketImageBase64'] == null}" class="card-img-top"
	                     th:src="@{/images/sample.png}" alt="é è¨­åœ–ç‰‡"
	                     style="height: 150px; object-fit: cover;">
	                <div class="card-body">
	                    <h5 class="card-title" th:text="${ticket['ticketName']}">ç¥¨åˆ¸åç¨±</h5>
	                    <p class="card-text text-muted mb-2">
	                        <span th:text="${#numbers.formatDecimal(ticket['ticketPrice'], 0, 'POINT', 2, 'COMMA')}"></span> å…ƒ
	                    </p>
	                </div>
	            </div>
	
	            <!-- æ›´å¤šç¥¨åˆ¸å¡ç‰‡ -->
	            <div class="card bg-light d-flex align-items-center justify-content-center" style="min-width: 250px; max-width: 250px;">
	                <a th:href="@{/ticket/list}" class="stretched-link text-decoration-none text-dark text-center">
	                    <div class="p-4">
	                        <h5>æŸ¥çœ‹æ›´å¤šç¥¨åˆ¸</h5>
	                        <span style="font-size: 2rem;">â•</span>
	                    </div>
	                </a>
	            </div>
	        </div>
	    </div>
	</section>


	

    <footer class="text-center mt-5 mb-3 text-muted">
    &copy; 2025 å°é´¿æ—…éŠ Tiger Travel. All rights reserved.
	</footer>
    
    
    <script>
	    function scrollLeft() {
	        const container = document.getElementById('ticketScroll');
	        container.scrollLeft -= 300;
	    }
	
	    function scrollRight() {
	        const container = document.getElementById('ticketScroll');
	        container.scrollLeft += 300;
	    }
	</script>
    
    
</body>
</html>